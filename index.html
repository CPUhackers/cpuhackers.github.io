<!DOCTYPE html>
<html lang="en-us">
  <head>
    <meta charset="UTF-8">
    <title>CPU Hackers by CPUhackers</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="stylesheets/normalize.css" media="screen">
    <link href='https://fonts.googleapis.com/css?family=Open+Sans:400,700' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-light.css" media="screen">
  </head>
  <body>
    <section class="page-header">
      <h1 class="project-name">CPU Hackers</h1>
      <h2 class="project-tagline">Where we tinker with the inner core and share the results</h2>
    </section>

    <section class="main-content">
      <h2>
<a id="how-to-change-the-cpu-frequency" class="anchor" href="#how-to-change-the-cpu-frequency" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How To Change The CPU Frequency?</h2>

<h3>
<a id="installation" class="anchor" href="#installation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Installation</h3>

<pre><code>sudo apt-get install cpufrequtils
</code></pre>

<h3>
<a id="running" class="anchor" href="#running" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running</h3>

<p>Save the below in a set_freq.sh file</p>

<div class="highlight highlight-source-shell"><pre>sudo cpufreq-set -c0 -g userspace
sudo cpufreq-set -c1 -g userspace
sudo cpufreq-set -c2 -g userspace
sudo cpufreq-set -c3 -g userspace

sudo cpufreq-set -c0 -f <span class="pl-smi">$1</span>GHz
sudo cpufreq-set -c1 -f <span class="pl-smi">$1</span>GHz
sudo cpufreq-set -c2 -f <span class="pl-smi">$1</span>GHz
sudo cpufreq-set -c3 -f <span class="pl-smi">$1</span>GHz


cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_cur_freq
cat /sys/devices/system/cpu/cpu1/cpufreq/scaling_cur_freq
cat /sys/devices/system/cpu/cpu2/cpufreq/scaling_cur_freq
cat /sys/devices/system/cpu/cpu3/cpufreq/scaling_cur_freq
</pre></div>

<p>Now execute </p>

<pre><code>chmod +x set_freq.sh
</code></pre>

<p>To change the frequncy exeucute the below command</p>

<pre><code>./set_freq.sh 2.2
</code></pre>

<p>The available freqencies can be found by </p>

<pre><code>more cat /sys/devices/system/cpu/cpu0/cpufreq/scaling_available_frequencies
</code></pre>

<h2>
<a id="running-benchmarks" class="anchor" href="#running-benchmarks" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Running Benchmarks</h2>

<p>We used <a href="https://codesign.llnl.gov/lulesh.php">Lulesh benchmark</a> for studying the change in temperature and execution time with change in frequency</p>

<h2>
<a id="results" class="anchor" href="#results" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Results</h2>

<table>
<thead>
<tr>
<th>Frequency</th>
<th align="center">Temp Core 1 ℃</th>
<th align="right">Temp Core ℃</th>
<th align="right">Execution Time  in Seconds</th>
</tr>
</thead>
<tbody>
<tr>
<td>1197000</td>
<td align="center">35</td>
<td align="right">37</td>
<td align="right">79.65</td>
</tr>
<tr>
<td>2261000</td>
<td align="center">39</td>
<td align="right">43</td>
<td align="right">40.34</td>
</tr>
<tr>
<td>2394000</td>
<td align="center">39</td>
<td align="right">43</td>
<td align="right">39.49</td>
</tr>
<tr>
<td>2527000</td>
<td align="center">41</td>
<td align="right">44</td>
<td align="right">37.05</td>
</tr>
<tr>
<td>2660000</td>
<td align="center">43</td>
<td align="right">45</td>
<td align="right">35.52</td>
</tr>
<tr>
<td>2793000</td>
<td align="center">43</td>
<td align="right">45</td>
<td align="right">34.26</td>
</tr>
<tr>
<td>2926000</td>
<td align="center">43</td>
<td align="right">46</td>
<td align="right">33.70</td>
</tr>
<tr>
<td>3059000</td>
<td align="center">44</td>
<td align="right">47</td>
<td align="right">32.27</td>
</tr>
<tr>
<td>3192000</td>
<td align="center">45</td>
<td align="right">48</td>
<td align="right">30.74</td>
</tr>
<tr>
<td>3193000</td>
<td align="center">45</td>
<td align="right">50</td>
<td align="right">31.15</td>
</tr>
</tbody>
</table>

<h3>
<a id="frequency-vs-tempararture-graph" class="anchor" href="#frequency-vs-tempararture-graph" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Frequency vs Tempararture Graph</h3>

<p><img src="images/freq-temp.png" alt="Temparature-Frequency"> </p>

<h3>
<a id="frequency-vs-time-graph" class="anchor" href="#frequency-vs-time-graph" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Frequency vs Time Graph</h3>

<p><img src="images/time-freq.png" alt="Time-Frequency"> </p>

<h2>
<a id="temparature-reading-in-hpc-computer" class="anchor" href="#temparature-reading-in-hpc-computer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Temparature reading in HPC Computer</h2>

<p><img src="images/temparature-silp.png" alt="Silp Temparature Reading"></p>

<h2>
<a id="how-to-read-cpu-voltage-for-64-bit-computer" class="anchor" href="#how-to-read-cpu-voltage-for-64-bit-computer" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>How to read CPU voltage for 64 bit computer</h2>

<div class="highlight highlight-source-shell"><pre> sudo apt-get install msr-tools
 sudo modprobe msr
 sudo rdmsr 408 --bitfield 47:32 --decimal --processor 0</pre></div>

<p>The value of register 408(x198) can be used to calculate the value of voltage. 
The value obtained from 32:47 bits on multiplying with (1 / 2^^13) gives the voltage.</p>

<h2>
<a id="comparison-of-frequency-vs-voltage" class="anchor" href="#comparison-of-frequency-vs-voltage" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Comparison of Frequency Vs Voltage</h2>

<table>
<thead>
<tr>
<th>Max Frequency</th>
<th align="center">Max Voltage</th>
<th align="right">Min Voltage</th>
</tr>
</thead>
<tbody>
<tr>
<td>1.2 GHz</td>
<td align="center">0.86890 Volt</td>
<td align="right">0.70386 Volt</td>
</tr>
<tr>
<td>1.4 GHz</td>
<td align="center">0.86890 Volt</td>
<td align="right">0.71838 Volt</td>
</tr>
<tr>
<td>1.6 GHz</td>
<td align="center">0.86890 Volt</td>
<td align="right">0.73291 Volt</td>
</tr>
<tr>
<td>1.8 GHz</td>
<td align="center">0.86890 Volt</td>
<td align="right">0.75232 Volt</td>
</tr>
<tr>
<td>2.0 GHz</td>
<td align="center">0.87366 Volt</td>
<td align="right">0.81055 Volt</td>
</tr>
<tr>
<td>2.2 GHz</td>
<td align="center">0.87366 Volt</td>
<td align="right">0.80579 Volt</td>
</tr>
<tr>
<td>2.4 GHz</td>
<td align="center">0.90771 Volt</td>
<td align="right">0.86890 Volt</td>
</tr>
</tbody>
</table>

<h3>
<a id="graph" class="anchor" href="#graph" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Graph</h3>

<p><img src="images/freqvsvol.png" alt="Freq vs Voltage"></p>

<h2>
<a id="time-for-various-programs" class="anchor" href="#time-for-various-programs" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Time for Various Programs</h2>

<table>
<thead>
<tr>
<th>Program</th>
<th>Userspace Time</th>
<th>Ondemand Time</th>
</tr>
</thead>
<tbody>
<tr>
<td>Compress 10gb file</td>
<td>01:55 Min</td>
<td>01:20 Min</td>
</tr>
<tr>
<td>Lulesh2.0</td>
<td>48.41 Sec</td>
<td>42.99 Sec</td>
</tr>
<tr>
<td>Convert File To Pdf - LibreOffice</td>
<td>6.41 Sec</td>
<td>4.30 Sec</td>
</tr>
<tr>
<td>Copy 1 GB</td>
<td>16.128 Sec</td>
<td>17.356 Sec</td>
</tr>
</tbody>
</table>

<h2>
<a id="comparison-of-governors" class="anchor" href="#comparison-of-governors" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Comparison of Governors</h2>

<h2>
<a id="time" class="anchor" href="#time" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Time</h2>

<table>
<thead>
<tr>
<th>Program</th>
<th>Ondemand</th>
<th>Conservative</th>
<th>Powersave</th>
<th>Performance</th>
<th>Rounder @ 1</th>
<th>Rounder @ 2</th>
<th>Rounder @ 5</th>
</tr>
</thead>
<tbody>
<tr>
<td>Lulesh @ 30</td>
<td>29.76</td>
<td>31.35</td>
<td>74.26</td>
<td>30.89</td>
<td>43.21</td>
<td>41.91</td>
<td>43.46</td>
</tr>
<tr>
<td>Lulesh @ 35</td>
<td>56.16</td>
<td>56.80</td>
<td>132.25</td>
<td>57.02</td>
<td>79.10</td>
<td>82.87</td>
<td>77.30</td>
</tr>
<tr>
<td>Lulesh @ 40</td>
<td>97.24</td>
<td>96.40</td>
<td>215.02</td>
<td>95.29</td>
<td>136.79</td>
<td>128.67</td>
<td>132.02</td>
</tr>
<tr>
<td>Lulesh @ 45</td>
<td>159.65</td>
<td>175.90</td>
<td>359.83</td>
<td>157.57</td>
<td>217.00</td>
<td>225.11</td>
<td>209.52</td>
</tr>
</tbody>
</table>

<h2>
<a id="max-temparatue" class="anchor" href="#max-temparatue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Max Temparatue</h2>

<table>
<thead>
<tr>
<th>Program</th>
<th>Ondemand</th>
<th>Conservative</th>
<th>Powersave</th>
<th>Performance</th>
<th>Rounder @ 1</th>
<th>Rounder @ 2</th>
<th>Rounder @ 5</th>
</tr>
</thead>
<tbody>
<tr>
<td>Lulesh @ 30</td>
<td>58,57</td>
<td>56,55</td>
<td>44,43</td>
<td>56,55</td>
<td>55,53</td>
<td>56,55</td>
<td>55,53</td>
</tr>
<tr>
<td>Lulesh @ 35</td>
<td>58,56</td>
<td>58,56</td>
<td>45,44</td>
<td>57,56</td>
<td>56,55</td>
<td>56,55</td>
<td>55,53</td>
</tr>
<tr>
<td>Lulesh @ 40</td>
<td>60,58</td>
<td>60,59</td>
<td>45,44</td>
<td>59,57</td>
<td>57,56</td>
<td>58,56</td>
<td>57,54</td>
</tr>
<tr>
<td>Lulesh @ 45</td>
<td>59, 57</td>
<td>60,57</td>
<td>44,42</td>
<td>63,57</td>
<td>57,55</td>
<td>57,55</td>
<td>58,56</td>
</tr>
</tbody>
</table>

<h2>
<a id="min-temparatue" class="anchor" href="#min-temparatue" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Min Temparatue</h2>

<table>
<thead>
<tr>
<th>Program</th>
<th>Ondemand</th>
<th>Conservative</th>
<th>Powersave</th>
<th>Performance</th>
<th>Rounder @ 1</th>
<th>Rounder @ 2</th>
<th>Rounder @ 5</th>
</tr>
</thead>
<tbody>
<tr>
<td>Lulesh @ 30</td>
<td>44,43</td>
<td>39,40</td>
<td>40,40</td>
<td>42,42</td>
<td>41, 41</td>
<td>41,39</td>
<td>39,38</td>
</tr>
<tr>
<td>Lulesh @ 35</td>
<td>41,40</td>
<td>39,39</td>
<td>39,39</td>
<td>44,42</td>
<td>39, 39</td>
<td>40,39</td>
<td>41,39</td>
</tr>
<tr>
<td>Lulesh @ 40</td>
<td>41,41</td>
<td>41,40</td>
<td>39,39</td>
<td>47,45</td>
<td>40, 40</td>
<td>41,40</td>
<td>42,40</td>
</tr>
<tr>
<td>Lulesh @ 45</td>
<td>37, 36</td>
<td>39,37</td>
<td>38,37</td>
<td>43,40</td>
<td>42, 40</td>
<td>40,39</td>
<td>41,39</td>
</tr>
</tbody>
</table>

<h2>
<a id="average-temparature" class="anchor" href="#average-temparature" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Average Temparature</h2>

<table>
<thead>
<tr>
<th>Program</th>
<th>Ondemand</th>
<th>Conservative</th>
<th>Powersave</th>
<th>Performance</th>
<th>Rounder @ 1</th>
<th>Rounder @ 2</th>
<th>Rounder <a href="https://github.com/5" class="user-mention">@5</a>
</th>
</tr>
</thead>
<tbody>
<tr>
<td>Lulesh @ 30</td>
<td>56.63,55.35</td>
<td>54.11, 52.81</td>
<td>42.53, 41.92</td>
<td>53.53,52.67</td>
<td>49.68, 48.22</td>
<td>49.22,47.97</td>
<td>49.03,46.55</td>
</tr>
<tr>
<td>Lulesh @ 35</td>
<td>55.32,53.96</td>
<td>55.01, 53.62</td>
<td>43.46,42.32</td>
<td>55.37,53.79</td>
<td>49.57, 48.52</td>
<td>50.04,48.94</td>
<td>48.36,46.01</td>
</tr>
<tr>
<td>Lulesh @ 40</td>
<td>57.01,55.38</td>
<td>57.09, 55.80</td>
<td>43.71,42.67</td>
<td>56.63,55.08</td>
<td>50.79, 49.79</td>
<td>51.21,50.01</td>
<td>50.05,47.76</td>
</tr>
<tr>
<td>Lulesh @ 45</td>
<td>55.51,52.91</td>
<td>56.34, 53.82</td>
<td>43.08, 40.57</td>
<td>56.72,53.75</td>
<td>50.65, 48.16</td>
<td>50.99,48.60</td>
<td>50.68,48.57</td>
</tr>
</tbody>
</table>

<table>
<thead>
<tr>
<th>Program</th>
<th>Ondemand(s)</th>
<th>Tebalo(s)</th>
</tr>
</thead>
<tbody>
<tr>
<td>Graph 0.3k 0.3k</td>
<td>18.52</td>
<td>20.24</td>
</tr>
<tr>
<td>Graph 0.5k 0.5k</td>
<td>27.45</td>
<td>28.42</td>
</tr>
<tr>
<td>Graph 0.7k 0.7k</td>
<td>48.52</td>
<td>52.24</td>
</tr>
<tr>
<td>Graph 1k 1k</td>
<td>84.33</td>
<td>88.41</td>
</tr>
</tbody>
</table>

      <footer class="site-footer">

        <span class="site-footer-credits">This page was generated by <a href="https://pages.github.com">GitHub Pages</a> using the <a href="https://github.com/jasonlong/cayman-theme">Cayman theme</a> by <a href="https://twitter.com/jasonlong">Jason Long</a>.</span>
      </footer>

    </section>

  
  </body>
</html>
